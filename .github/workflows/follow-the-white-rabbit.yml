# follow the white rabbit.
name: follow the white rabbit.

on:
  push:
    tags: ['v*']

permissions:
  contents: write

jobs:
  release:
    uses: coryzibell/nebuchadnezzar/.github/workflows/follow-the-white-rabbit.yml@main
    with:
      needs-openssl: true
      # ONNX Runtime doesn't provide prebuilt binaries for musl or FreeBSD targets
      # aarch64-unknown-linux-gnu: ort-sys static linking fails in cross-compilation (see issue)
      # x86_64-apple-darwin: ort dropped Intel Mac support upstream (ort 2.0+)
      exclude-targets: x86_64-unknown-linux-musl,aarch64-unknown-linux-musl,x86_64-unknown-freebsd,aarch64-unknown-linux-gnu,x86_64-apple-darwin
    secrets:
      GH_PAT: ${{ secrets.GH_PAT }}
